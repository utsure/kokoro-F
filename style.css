/* ベース */
html, body { margin: 0; padding: 0; height: 100vh; /* ★ 100%から100vhに変更 */ width: 100%; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #222; /* 背景色を変更 */ overflow: hidden; }
* { box-sizing: border-box; }
body { /* ★ display:flexを削除 */ }

/* コンテナ (margin:autoで中央寄せ) */
.app-container { width: 100%; height: 100%; max-width: 450px; /* 少し幅を広げる */ aspect-ratio: 9 / 19.5; background: #fff; position: relative; overflow: hidden; margin: auto; /* ★ 中央寄せ */ box-shadow: 0 10px 40px rgba(0,0,0,0.5); }

/* 画面 */
.screen { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; opacity: 0; pointer-events: none; transition: opacity .4s ease; }
.screen.active { opacity: 1; pointer-events: auto; }

/* テキストとボタン */
h1 { font-size: 2.3rem; font-weight: 800; color: #333; margin: 0 0 10px; }
h2 { font-size: 1.7rem; font-weight: 700; color: #444; margin: 0 0 10px; }
p  { font-size: 1rem; color: #666; line-height: 1.6; margin: 0 0 8px; }
button { padding: 14px 28px; font-size: 16px; font-weight: 700; border-radius: 999px; cursor: pointer; background: #111; color: #fff; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform .15s, box-shadow .15s; user-select: none;}
button:active { transform: translateY(1px); }
button:disabled { background: #888; cursor: not-allowed; }
button.secondary { background: #ececec; color: #222; }
input { padding: 10px; border-radius: 8px; border: 1px solid #ddd; flex: 1; }
.meta-inputs { display: flex; gap: 8px; margin: 12px 0; width: 90%; }

/* F値入力 */
#screen-fvalue-input { justify-content: space-around; }
.aperture-control-container { flex: 1; display:flex; align-items:center; justify-content:center;}
.f-value-title { font-size: 1.1rem; font-weight: 600; color: #555; }
.aperture-control { position: relative; width: 200px; height: 200px; transition: all .18s ease; }
.aperture-ring { width: 100%; height: 100%; border-radius: 50%; background: #2A9858; box-shadow: inset 0 0 10px rgba(0,0,0,0.25), 0 5px 15px rgba(0,0,0,0.25); }
.aperture-value { position: absolute; inset: 0; display: grid; place-items: center; font-size: 2.3rem; font-weight: 800; color: #fff; }

/* BPM計測 */
.bpm-video-wrapper { width: 80%; max-width: 320px; aspect-ratio: 4/3; border: 4px solid #D30000; border-radius: 12px; margin: 12px 0; overflow: hidden; }
#bpm-video { width: 100%; height: 100%; object-fit: cover; }
.bpm-actions { position: relative; width: 100%; margin-top: 20px; display: flex; justify-content: center; align-items: center; }
#bpm-skip-btn { position: absolute; right: 20px; font-size: 14px; padding: 8px 14px; }

/* カメラ画面 */
#screen-camera { background: #000; padding: 0; }
#video { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; transition: filter 0.2s linear; /* フィルター変化を滑らかに */ }
#canvas { display: none; } /* 撮影時のみ使うので非表示 */
.camera-ui { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: space-between; padding: 16px; z-index: 2; pointer-events: none; /* UIは操作を妨げない */}
.camera-ui-top, .camera-ui-bottom { width: 100%; display: flex; justify-content: space-between; align-items: center; pointer-events: auto; /* ボタンなどは操作可能に */ }
.camera-ui-top { color: #fff; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); }
#camera-shutter-btn { padding: 18px 36px; border: 3px solid #fff; background: rgba(255,255,255,.3); color: #fff; font-size: 1.1rem; font-weight: 800; backdrop-filter: blur(5px); }

/* ギャラリーモーダル */
.cc-modal.hidden { display: none; }
.cc-modal { position: fixed; inset: 0; z-index: 5000; }
.cc-modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.6); }
.cc-modal-panel { position: absolute; inset: 6% 4% auto; bottom: 6%; background: rgba(20,20,20,.95); color: #fff; border-radius: 12px; border: 1px solid rgba(255,255,255,.2); overflow: hidden; display: flex; flex-direction: column; }
.cc-modal-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,.15); }
#gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px,1fr)); gap: 8px; padding: 10px; overflow-y: auto; flex: 1; }
.cc-thumb { cursor:pointer; }
.cc-thumb img { width:100%; height:auto; border-radius:4px; display:block; }
.cc-thumb .meta { font-size:11px; line-height:1.3; white-space:pre-wrap; color:#ddd; padding-top: 4px; text-align: left;}
